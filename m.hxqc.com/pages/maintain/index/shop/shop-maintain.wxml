
<!-- 导入loading模板 -->
<import src="/template/loading.wxml" />
<template is="pageLoading" data="{{pageLoading}}" />

<!-- 头部 -->
<view class="homeTop2">
  <view class="ht_infos clearfix">
    <view class="img">
      <image mode="scaleToFill" src="{{info.shopInfo.shopLogoThumb}}"></image>
    </view>
    <view class="text">
      <view class="name ellipsis">{{info.shopInfo.shopName}}</view>
      <view class="address">{{info.shopInfo.shopLocation.address}}</view>
      <view class="tel">咨询电话: {{info.shopInfo.shopTel}}</view>
      <view class="tel">售后电话: {{info.shopInfo.serviceHotline}}</view>
    </view>
  </view>
  <view class="ht_handles2">
    <view class="hd_map" catchtap="onNav" data-lat="{{info.shopInfo.shopLocation.latitude}}" data-lng="{{info.shopInfo.shopLocation.longitude}}">
      <image src="http://m.hxqc.com/wxapp/shop/icons/h_map.png"></image>
      <view>店铺地址</view>
    </view>
    <view class="hd_skip">
    <navigator open-type="redirect" url="/pages/shop/intro/index?shopID={{info.shopInfo.shopID}}">
      <image src="http://m.hxqc.com/wxapp/shop/icons/h_intro.png"></image>
      <view>公司介绍</view>
      </navigator>
    </view>
    <view class="menu_open" bindtap="menu_show">
      <image src="http://m.hxqc.com/wxapp/shop/icons/ic_home_column.png"></image>
      <view>栏目</view>
      <text class="span icon_open"></text>
    </view>
  </view>
  <view class="menu_list clearfix {{menu_showClass}}">
    <view class="fisrt clearfix">
      <navigator url="/pages/shop/recomshop/detail?shopID={{info.shopInfo.shopID}}" open-type="redirect">
        <view class="a t1">
          <text class="span"></text>首页
        </view>
      </navigator>
      <navigator url="/pages/shop/recomshop/shop-quotation?shopID={{info.shopInfo.shopID}}" open-type="redirect">
        <view class="a t2 active">
          <text class="span"></text>车型报价
        </view>
      </navigator>
      <navigator url="/pages/shop/news/shopnews?shopID={{info.shopInfo.shopID}}" open-type="redirect">
        <view class="a t4">
          <text class="span"></text>促销信息
        </view>
      </navigator>
    </view>
  </view>
</view>

<!-- 推荐项目 -->
<block wx:if="{{list_recommand.length > 0}}">
  <view class="recommend_text">您已选择{{list_recommand.length}}项保养项目</view>
  <view class="care_item on">
    <block wx:for="{{list_recommand}}">

      <!--list-->
      <view class="project">

        <!--groupTag-->
        <view class="cart_name clearfix" style="border-bottom: none;">
          <label for="checkbox{{index}}" catchtap="onClickGoodType" data-type="recommand" data-i="{{index}}" data-groupID="{{item.itemGroupID}}">
             <checkbox checked="{{1 == item.choose}}" color="#ff7043" id="checkbox{{index}}"/>
            <view class="p type_name">{{item.name}}</view>
            <view class="p price tprice">工时费
              <text class="i"><block wx:if="{{item.workCost >0}}">￥{{item.workCost}}</block> <block wx:else>免费</block></text>
            </view>
          </label>
        </view>

        <!--item-->
        <block wx:for="{{item.items}}" wx:for-index="i1" wx:for-item="r1">
          <view class="p child_title">{{r1.name}}</view>
          <view class="child_item">
            <block wx:for="{{r1.goods}}" wx:for-index="i2" wx:for-item="r2">
              <block wx:if="{{r2.length === 1}}">

                <!--type 2-->
                <view class="cart_item clearfix">
                  <view class="p type_text">
                    <block wx:if="{{r1.goods.length>1}}">{{i2+1}}. </block>{{r2[0].name}}</view>
                  <view class="p price">材料费
                    <text class="i">￥{{r2[0].amount}}</text>
                  </view>
                </view>
              </block>
              <block wx:else>

                <!--type 1-->
                <view class="cart_item clearfix">
                  <view class="p type_text">
                    <block wx:if="{{r1.goods.length>1}}">{{i2+1}}. </block>{{r2[0].typeName}}</view>
                </view>
                <view class="cart_server" style="border-bottom: 1px dashed #D5D5D5;">
                  <scroll-view scroll-x="true">
                    <block wx:for="{{r2}}" wx:for-index="i3" wx:for-item="r3">
                      <view class="server_box {{r3.choose>0?'choose':''}}" catchtap="onClickGoods" data-type="recommand" data-choose="{{r3.choose}}" data-ia="{{index}}" data-ib="{{i1}}" data-ic="{{i2}}" data-id="{{i3}}" style="margin-right: 10px;">
                        <view class="p box_top"><view class="text">{{r3.name}}</view></view>
                        <view class="p box_bottom">材料费
                          <text class="i">￥{{r3.amount}}</text>
                        </view>
                        <text class="span"></text>
                      </view>
                    </block>
                  </scroll-view>
                </view>
              </block>
            </block>
          </view>
        </block>
      </view>

            <!--price-->
      <view class="item_price clearfix">
        <block wx:if="{{item.summary.discount > 0 }}">
          <view class="p original_price">原价
            <text class="i">￥{{item.summary.total}}</text>
          </view>
         	<view class="p set_price">折扣价
	          <text class="i">￥{{item.summary.pay}}</text>
	        </view>
          
        </block>
        <block wx:else>
     	     <view class="p set_price">单项小计
	          <text class="i">￥{{item.summary.pay}}</text>
	        </view>
        </block>
      </view>
    </block>
  </view>
</block>

<!--自行选择-->
<block wx:if="{{list_optional.length > 0}}">
  <view class="recommend_text choose_item {{choose_show}}" bindtap="choose_show">可自行选择其它{{list_optional.length}}项保养项目</view>
  <view class="care_item {{choose_show}}">
    <block wx:for="{{list_optional}}">

      <!--list-->
      <view class="project">

        <!--groupTag-->
        <view class="cart_name clearfix" style="border-bottom: none;">
          <label for="gcheckbox{{index}}" catchtap="onClickGoodType" data-type="optional" data-i="{{index}}" data-groupID="{{item.itemGroupID}}">
             <checkbox checked="{{1 == item.choose}}" color="#ff7043" id="gcheckbox{{index}}"/>
            <view class="p type_name">{{item.name}}</view>
            <view class="p price tprice">工时费
              <text class="i"><block wx:if="{{item.workCost >0}}">￥{{item.workCost}}</block> <block wx:else>免费</block></text>
            </view>
          </label>
        </view>

        <!--item-->
        <block wx:for="{{item.items}}" wx:for-index="i1" wx:for-item="r1">
          <view class="p child_title">{{r1.name}}</view>
          <view class="child_item">
            <block wx:for="{{r1.goods}}" wx:for-index="i2" wx:for-item="r2">
              <block wx:if="{{r2.length === 1}}">

                <!--type 2-->
                <view class="cart_item clearfix">
                  <view class="p type_text">
                    <block wx:if="{{r1.goods.length>1}}">{{i2+1}}. </block>{{r2[0].name}}</view>
                  <view class="p price">材料费
                    <text class="i">￥{{r2[0].amount}}</text>
                  </view>
                </view>
              </block>
              <block wx:else>

                <!--type 1-->
                <view class="cart_item clearfix">
                  <view class="p type_text">
                    <block wx:if="{{r1.goods.length>1}}">{{i2+1}}. </block>{{r2[0].typeName}}</view>
                </view>
                <view class="cart_server" style="border-bottom: 1px dashed #D5D5D5;">
                  <scroll-view scroll-x="true">
                    <block wx:for="{{r2}}" wx:for-index="i3" wx:for-item="r3">
                      <view class="server_box {{r3.choose>0?'choose':''}}" catchtap="onClickGoods" data-type="optional" data-choose="{{r3.choose}}" data-ia="{{index}}" data-ib="{{i1}}" data-ic="{{i2}}" data-id="{{i3}}" style="margin-right: 10px;">
                        <view class="p box_top"><view class="text">{{r3.name}}</view></view>
                        <view class="p box_bottom">材料费
                          <text class="i">￥{{r3.amount}}</text>
                        </view>
                        <text class="span"></text>
                      </view>
                    </block>
                  </scroll-view>
                </view>
              </block>
            </block>
          </view>
        </block>
      </view>

        <!--price-->
      <view class="item_price clearfix">
        <block wx:if="{{item.summary.discount > 0 }}">
          <view class="p original_price">原价
            <text class="i">￥{{item.summary.total}}</text>
          </view>
         	<view class="p set_price">折扣价
	          <text class="i">￥{{item.summary.pay}}</text>
	        </view>
        </block>
        <block wx:else>
     	     <view class="p set_price">单项小计
	          <text class="i">￥{{item.summary.pay}}</text>
	        </view>
        </block>
      </view>
      
    </block>
  </view>
</block>

<!-- 价格汇总 -->
<view class="order_total clearfix">
  <view class="ul bill_details">
    <view class="li">
      <view class="p bill_tip">
        <image src="http://www.tm.hxqc.com/wxapp/maintain/tip_info.png" alt=""></image>赠免费保养检测</view>
      <view class="p">工时总额：</view>
      <text class="span timePrice">￥{{summary.workCost}}</text>
      <view class="p">材料总额：</view>
      <text class="span partPrice">￥{{summary.goods}}</text>
      <block wx:if="{{summary.discount>0}}">
	      <view class="p">套餐折扣：</view>
	      <text class="span disPrice">￥ {{summary.discount}}</text>
      </block>
      <view class="p">订单总额：</view>
      <text class="span countPrice">￥{{summary.total}}</text>
      <view class="p border-top">实付总额：</view>
      <text class="span countPrice border-top">￥{{summary.pay}}</text>
    </view>
  </view>
</view>
<view class="payment_status">
  <text class="span">总金额：<text class="countPrice b">￥{{summary.pay}}</text></text>
    <view class="a pay_btn"  catchtap="onClickMaintain">去保养</view>
</view>